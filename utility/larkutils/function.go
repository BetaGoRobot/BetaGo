package larkutils

import (
	"github.com/BetaGoRobot/BetaGo/consts"
	"github.com/BetaGoRobot/BetaGo/utility"
	"github.com/BetaGoRobot/BetaGo/utility/database"
)

var emojiTypeList = []string{
	"FINGERHEART",
	"EMBARRASSED",
	"SMART",
	"XBLUSH",
	"BETRAYED",
	"OneSecond",
	"GeneralTravellingCar",
	"HEARTBROKEN",
	"CANDIEDHAWS",
	"HEADSET",
	"Drumstick",
	"TOASTED",
	"GeneralBusinessTrip",
	"MeMeMe",
	"MONEY",
	"SKULL",
	"ENOUGH",
	"KISS",
	"Trophy",
	"HUSKY",
	"CALF",
	"MUSCLE",
	"COMFORT",
	"SHOCKED",
	"BubbleTea",
	"TEASE",
	"StatusInFlight",
	"LAUGH",
	"GeneralMoonRest",
	"Hundred",
	"INNOCENTSMILE",
	"Coffee",
	"SPEECHLESS",
	"Sigh",
	"WAVE",
	"Status_PrivateMessage",
	"OnIt",
	"TERROR",
	"Typing",
	"FORTUNE",
	"ROSE",
	"EYESCLOSED",
	"GIFT",
	"SILENT",
	"POOP",
	"StickyRiceBalls",
	"DONE",
	"WOW",
	"Snowman",
	"ERROR",
	"CrossMark",
	"CheckMark",
	"HAMMER",
	"WINK",
	"CLAP",
	"LOVE",
	"WHIMPER",
	"YAWN",
	"TONGUE",
	"BEER",
	"SMILE",
	"LUCK",
	"StatusEnjoyLife",
	"SLAP",
	"WRONGED",
	"XmasTree",
	"Pepper",
	"TRICK",
	"BOMB",
	"No",
	"StatusFlashOfInspiration",
	"SHY",
	"TEARS",
	"GeneralInMeetingBusy",
	"SLIGHT",
	"Get",
	"THINKING",
	"Soccer",
	"STRIVE",
	"DROWSY",
	"DIZZY",
	"FIRECRACKER",
	"SWEAT",
	"Lemon",
	"DULL",
	"CHUCKLE",
	"GLANCE",
	"Yes",
	"SHOWOFF",
	"GeneralSun",
	"OBSESSED",
	"EatingFood",
	"OKR",
	"HUG",
	"SICK",
	"WITTY",
	"SALUTE",
	"Pin",
	"REDPACKET",
	"SLEEP",
	"PUKE",
	"SMUG",
	"JOYFUL",
	"FIREWORKS",
	"RoarForYou",
	"CAKE",
	"CLEAVER",
	"RAINBOWPUKE",
	"ANGRY",
	"JIAYI",
	"FACEPALM",
	"SHHH",
	"BEAR",
	"HAUGHTY",
	"OK",
	"PETRIFIED",
	"WHAT",
	"THANKS",
	"SHAKE",
	"Loudspeaker",
	"DROOL",
	"Basketball",
	"ThumbsDown",
	"HEART",
	"BLUSH",
	"PROUD",
	"WAIL",
	"VRHeadset",
	"XmasHat",
	"CRY",
	"StatusBus",
	"GeneralWorkFromHome",
	"FISTBUMP",
	"LOOKDOWN",
	"THUMBSUP",
	"SPITBLOOD",
	"2022",
	"PRAISE",
	"BULL",
	"Fire",
	"HIGHFIVE",
	"LOL",
	"SMOOCH",
	"AWESOMEN",
	"SMIRK",
	"SOB",
	"PARTY",
	"18X",
	"BLUBBER",
	"SCOWL",
	"Alarm",
	"GeneralDoNotDisturb",
	"NOSEPICK",
	"MinusOne",
	"YEAH",
	"LGTM",
	"FROWN",
	"UPPERLEFT",
	"CUCUMBER",
	"CRAZY",
	"YouAreTheBest",
	"Music",
	"APPLAUSE",
	"LIPS",
	"StatusReading",
}

func GetRandomEmoji() string {
	return utility.SampleSlice(emojiTypeList)
}

func CheckFunctionEnabling(chatID string, function consts.LarkFunctionEnum) bool {
	// 获取GuildID(群聊)下的所有启用方法，缓存Key=GuildID
	queryDatas, _ := database.FindByCacheFunc(
		database.FunctionEnabling{GuildID: chatID},
		func(d database.FunctionEnabling) string {
			return d.GuildID
		},
	)
	for _, data := range queryDatas {
		if data.Function == function {
			return true
		}
	}
	return false
}
